p8105_hw2_yg2964
================
2024-10-01

Name:Yuchen Gu

# Problem 1

## Section 1 Read and clean the data

``` r
nyc_subway_entrances <- read_csv("data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
  col_types = cols(Route8 = "c", Route9 = "c", Route10 = "c", Route11 = "c")) |> 
  janitor::clean_names() |> 
  select(line, station_name, station_latitude, station_longitude, 
    starts_with("route"), entry, vending, entrance_type, ada) |> 
  mutate(entry = case_match(entry, "YES" ~ TRUE, "NO" ~ FALSE, .default = NA))
```

This dataset contains information about NYC subway station entrances and
exits. The variables include line, station_name, station_latitude,
station_longitude, routes served (multiple columns starting with
“route”), entry (whether entry is allowed), vending (presence of vending
machines), entrance_type, and ada (ADA compliance). The data cleaning
steps involved selecting relevant columns, cleaning column names, and
converting the entry variable from character to logical. The resulting
dataset has 1868 rows and 19 columns. These data are not fully tidy, as
the route information is spread across multiple columns rather than
being in a single column.

## Section 2 Number of distinct stations:

``` r
n_distinct_stations <- nyc_subway_entrances |> 
  distinct(line,station_name) |> 
  nrow()
```

There are 465 distinct stations.

## Section 3 Number of ADA compliant stations:

``` r
n_ada_stations <- nyc_subway_entrances |> 
  filter(ada == TRUE) |> 
  distinct(line, station_name) |> 
  nrow()
```

There are 84 ADA compliant stations.

## Section 4 Proportion of station entrances/exits without vending that allow entrance:

``` r
prop_no_vending_entry <- nyc_subway_entrances |> 
  filter (vending == "NO") |> 
  summarize(prop_entry = mean (entry, na.rm = TRUE)) |> 
  pull(prop_entry)
```

The proportion of station entrances/exits without vending that allow
entrance is 0.3770492.

## Section 5 Reformatting data for route analysis:

``` r
nyc_subway2 <- nyc_subway_entrances |> 
  pivot_longer(cols = starts_with("route"),
    names_to = "route_number",
    values_to = "route_name",
    values_drop_na = TRUE) |> 
  distinct(line, station_name, route_name, .keep_all = TRUE)

a_train_stations <- nyc_subway2 |> 
  filter(route_name == "A") |> 
  distinct(line, station_name) |> 
  nrow()

a_train_ada_stations <- nyc_subway2 |> 
  filter(route_name == "A", ada == TRUE) |> 
  distinct(line, station_name) |> 
  nrow()
```

There are 60 distinct stations that serve the A train. Of these, 17 are
ADA compliant.
